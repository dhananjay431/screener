<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ramda/0.30.0/ramda.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.4/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.4/js/dataTables.bootstrap5.js"></script>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div clas="col-12">
          <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label"
              >Example textarea</label
            >
            <textarea
              class="form-control form-control-sm"
              id="exampleFormControlTextarea1"
              rows="3"
            ></textarea>
          </div>
          <div class="col-12">
            <table
              id="example"
              class="table table-sm table-striped table-hover"
              
            ></table>
          </div>
        </div>
      </div>
    </div>
    <script>
      document
        .getElementById('exampleFormControlTextarea1')
        .addEventListener('change', function (ev) {
          console.log(ev.target.value);
          new DataTable('#example', {
            lengthMenu: [
              [10, 25, 50, -1],
              [10, 25, 50, 'All'],
            ],
            columns: [
              // { title: 'priority', data: 'priority' },
              { title: 'symbol', data: 'symbol' },
              // { title: 'identifier', data: 'identifier' },
              // { title: 'open', data: 'open' },
              // { title: 'dayHigh', data: 'dayHigh' },
              // { title: 'dayLow', data: 'dayLow' },
              { title: 'lastPrice', data: 'lastPrice' },
              { title: 'previousClose', data: 'previousClose' },
              { title: 'change', data: 'change' },
              { title: 'pChange', data: 'pChange' },
              {
                title: 'ffmc',
                data: 'ffmc',
                render: (data, type, row) =>
                  Number((data / 1000000000).toFixed(2)),
              },
              { title: 'yearHigh', data: 'yearHigh' },
              { title: 'yearLow', data: 'yearLow' },
              {
                title: 'totalTradedVolume',
                data: 'totalTradedVolume',
                render: (data, type, row) =>
                  Number((data / 1000000).toFixed(2)),
              },
              {
                title: 'totalTradedValue',
                data: 'totalTradedValue',
                render: (data, type, row) =>
                  Number((data / 1000000).toFixed(2)),
              },
              // { title: 'lastUpdateTime', data: 'lastUpdateTime' },
              {
                title: 'nearWKH',
                data: 'nearWKH',
                render: (data, type, row) => Number(data.toFixed(2)),
              },
              {
                title: 'nearWKL',
                data: 'nearWKL',
                render: (data, type, row) => Number(data.toFixed(2)),
              },
              { title: 'perChange365d', data: 'perChange365d' },
              // { title: 'date365dAgo', data: 'date365dAgo' },
              // { title: 'date30dAgo', data: 'date30dAgo' },
              { title: 'perChange30d', data: 'perChange30d' },
            ],
            data: R.filter((d) => {
              return d.priority == 0;
            }, JSON.parse(ev.target.value).data),
          });
        });
    </script>
  </body>
</html>
